<!doctype html>
<html lang="ko">
    <head>
        <meta charset="UTF-8"/>
        <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
        <title>ë°•ì§„ì²  | Personal Branding</title>
        <style>
            :root {
                --accent: #4f7fff;

                /* Light defaults (will be overridden by [data-theme="dark"]) */
                --bg: #f7f7f8;
                --text: rgba(0, 0, 0, 0.92);
                --sub: rgba(0, 0, 0, 0.6);
                --border: rgba(0, 0, 0, 0.1);
                --panel: rgba(255, 255, 255, 0.75);
                --soft: rgba(0, 0, 0, 0.05);
                --gridOpacity: 0.06;
                --noiseOpacity: 0.05;

                --spot1Opacity: 0.65;
                --spot2Opacity: 0.3;
                --spot1Alpha: 0.35;
                --spot2Alpha: 0.18;
            }

            html[data-theme="dark"] {
                --bg: #0f0f0f;
                --text: rgba(255, 255, 255, 0.95);
                --sub: rgba(255, 255, 255, 0.6);
                --border: rgba(255, 255, 255, 0.1);
                --panel: rgba(0, 0, 0, 0.3);
                --soft: rgba(255, 255, 255, 0.05);
                --gridOpacity: 0.08;
                --noiseOpacity: 0.06;

                --spot1Opacity: 0.9;
                --spot2Opacity: 0.45;
                --spot1Alpha: 0.45;
                --spot2Alpha: 0.18;
            }

            * {
                box-sizing: border-box;
            }
            body {
                margin: 0;
                font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
                color: var(--text);
                background: var(--bg);
            }

            @keyframes floaty {
                0%,
                100% {
                    transform: translateY(0);
                }
                50% {
                    transform: translateY(-10px);
                }
            }
            @keyframes shimmer {
                0% {
                    transform: translateX(-30%);
                }
                100% {
                    transform: translateX(30%);
                }
            }

            /* Page background composition */
            .page {
                min-height: 100vh;
                padding: 48px 24px;
                position: relative;
                overflow: hidden;
                background: radial-gradient(1200px 600px at 20% 0%, rgba(79,127,255,0.18), transparent 60%), radial-gradient(900px 500px at 80% 10%, rgba(0,0,0,0.06), transparent 55%), var(--bg);
            }
            html[data-theme="dark"] .page {
                background: radial-gradient(1200px 600px at 20% 0%, rgba(79,127,255,0.18), transparent 60%), radial-gradient(1000px 500px at 80% 20%, rgba(255,255,255,0.06), transparent 55%), var(--bg);
            }

            .container {
                max-width: 1024px;
                margin: 0 auto;
                position: relative;
                z-index: 2;
                display: flex;
                flex-direction: column;
                gap: 48px;
            }

            /* Overlays */
            .grid {
                pointer-events: none;
                position: absolute;
                inset: 0;
                opacity: var(--gridOpacity);
                background-image: linear-gradient(rgba(255,255,255,0.08) 1px, transparent 1px), linear-gradient(90deg, rgba(255,255,255,0.08) 1px, transparent 1px);
                background-size: 40px 40px;
            }
            html[data-theme="light"] .grid {
                background-image: linear-gradient(rgba(0,0,0,0.10) 1px, transparent 1px), linear-gradient(90deg, rgba(0,0,0,0.10) 1px, transparent 1px);
            }

            .noise {
                pointer-events: none;
                position: absolute;
                inset: 0;
                opacity: var(--noiseOpacity);
                mix-blend-mode: overlay;
                background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='180' height='180'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='180' height='180' filter='url(%23n)' opacity='0.25'/%3E%3C/svg%3E");
            }

            .spot1,
            .spot2 {
                pointer-events: none;
                position: absolute;
                inset: 0;
                transition: opacity 150ms ease;
                opacity: 0;
            }

            /* floating blob */
            .blob {
                pointer-events: none;
                position: absolute;
                top: -160px;
                right: -160px;
                width: 520px;
                height: 520px;
                border-radius: 999px;
                filter: blur(48px);
                opacity: 0.75;
                animation: floaty 8s ease-in-out infinite;
                background: radial-gradient(circle at 30% 30%, rgba(79,127,255,0.28), transparent 60%);
            }
            html[data-theme="dark"] .blob {
                opacity: 1;
            }

            /* Cards / panels */
            .card {
                border: 1px solid var(--border);
                background: var(--panel);
                border-radius: 24px;
                padding: 28px;
                backdrop-filter: blur(10px);
                position: relative;
                overflow: hidden;
                box-shadow: 0 0 0 1px rgba(255,255,255,0.04);
            }
            html[data-theme="light"] .card {
                box-shadow: 0 0 0 1px rgba(0,0,0,0.03);
            }

            .line {
                position: absolute;
                left: 24px;
                right: 24px;
                top: 0;
                height: 1px;
                background: linear-gradient(90deg, transparent, rgba(79,127,255,0.9), transparent);
                opacity: 0.75;
            }
            html[data-theme="dark"] .line {
                opacity: 1;
            }

            .shimmer {
                position: absolute;
                inset-inline: 0;
                top: 0;
                height: 1px;
                opacity: 0.5;
                background: linear-gradient(90deg, transparent, rgba(79,127,255,0.5), transparent);
                transform: translateX(-30%);
                animation: shimmer 6s ease-in-out infinite;
            }

            .headerTop {
                display: flex;
                align-items: flex-start;
                justify-content: space-between;
                gap: 16px;
            }

            .badge {
                display: inline-flex;
                align-items: center;
                gap: 10px;
                font-size: 12px;
                letter-spacing: 0.08em;
                color: var(--sub);
                font-weight: 600;
            }
            .dot {
                width: 10px;
                height: 10px;
                border-radius: 999px;
                background: var(--accent);
            }

            h1 {
                margin: 10px 0 6px;
                font-size: 44px;
                line-height: 1.1;
                letter-spacing: -0.02em;
            }
            .titleGradient {
                background: linear-gradient(180deg, rgba(17,17,17,1), rgba(79,127,255,0.95));
                -webkit-background-clip: text;
                background-clip: text;
                color: transparent;
            }
            html[data-theme="dark"] .titleGradient {
                background: linear-gradient(180deg, rgba(255,255,255,1), rgba(79,127,255,0.95));
                -webkit-background-clip: text;
                background-clip: text;
                color: transparent;
            }

            .subline {
                margin: 0;
                color: var(--sub);
                font-size: 14px;
            }

            .actions {
                display: flex;
                gap: 10px;
                align-items: center;
            }
            .btn {
                border: 1px solid var(--border);
                background: var(--soft);
                color: var(--text);
                padding: 10px 14px;
                border-radius: 999px;
                font-size: 14px;
                cursor: pointer;
                transition: transform 120ms ease, background 120ms ease;
                user-select: none;
            }
            .btn:hover {
                background: rgba(127,127,127,0.10);
                transform: translateY(-1px);
            }
            .btnPrimary {
                color: var(--text);
                text-decoration: none;
                display: inline-flex;
                align-items: center;
                gap: 8px;
            }

            .intro {
                margin-top: 18px;
                max-width: 680px;
                border: 1px solid var(--border);
                border-radius: 18px;
                background: var(--soft);
                padding: 18px;
                position: relative;
                overflow: hidden;
            }
            .introGlow {
                position: absolute;
                right: -40px;
                top: -40px;
                width: 160px;
                height: 160px;
                border-radius: 999px;
                filter: blur(28px);
                background: rgba(79,127,255,0.18);
            }
            html[data-theme="dark"] .introGlow {
                background: rgba(79,127,255,0.22);
            }

            .intro p {
                margin: 0;
                color: rgba(0,0,0,0.8);
                line-height: 1.75;
                font-size: 14px;
                position: relative;
            }
            html[data-theme="dark"] .intro p {
                color: rgba(255,255,255,0.8);
            }

            .pillRow {
                display: flex;
                flex-wrap: wrap;
                gap: 8px;
                margin-top: 14px;
            }
            .pill {
                border: 1px solid var(--border);
                background: var(--soft);
                color: rgba(0,0,0,0.7);
                padding: 6px 10px;
                border-radius: 999px;
                font-size: 12px;
                backdrop-filter: blur(6px);
            }
            html[data-theme="dark"] .pill {
                color: rgba(255,255,255,0.7);
            }

            .stats {
                display: grid;
                gap: 12px;
                grid-template-columns: repeat(3, minmax(0,1fr));
                margin-top: 14px;
            }
            @media (max-width: 820px) {
                .stats {
                    grid-template-columns: 1fr;
                }
            }

            .stat {
                border: 1px solid var(--border);
                background: var(--soft);
                border-radius: 18px;
                padding: 14px;
            }
            .stat .k {
                font-size: 12px;
                color: var(--sub);
            }
            .stat .v {
                margin-top: 6px;
                font-size: 14px;
                font-weight: 700;
            }

            /* Section header */
            .sectionHead {
                display: flex;
                align-items: flex-end;
                justify-content: space-between;
                gap: 16px;
            }
            .sectionHead h2 {
                margin: 0;
                font-size: 16px;
                font-weight: 700;
            }
            .accentBar {
                width: 56px;
                height: 2px;
                border-radius: 99px;
                background: var(--accent);
                opacity: 0.9;
            }

            /* Tabs */
            .tabs {
                display: flex;
                gap: 10px;
                flex-wrap: wrap;
            }
            .tabBtn {
                border: 1px solid var(--border);
                background: var(--soft);
                color: rgba(0,0,0,0.75);
                border-radius: 999px;
                padding: 10px 14px;
                font-size: 14px;
                cursor: pointer;
                transition: background 120ms ease, transform 120ms ease;
            }
            html[data-theme="dark"] .tabBtn {
                color: rgba(255,255,255,0.75);
            }
            .tabBtn:hover {
                background: rgba(127,127,127,0.10);
                transform: translateY(-1px);
            }
            .tabBtn.active {
                background: rgba(127,127,127,0.14);
                color: var(--text);
                border-color: rgba(127,127,127,0.18);
            }

            /* Grids */
            .grid3 {
                display: grid;
                gap: 14px;
                grid-template-columns: repeat(3, minmax(0,1fr));
            }
            @media (max-width: 900px) {
                .grid3 {
                    grid-template-columns: 1fr;
                }
            }

            .grid2 {
                display: grid;
                gap: 14px;
                grid-template-columns: repeat(2, minmax(0,1fr));
            }
            @media (max-width: 900px) {
                .grid2 {
                    grid-template-columns: 1fr;
                }
            }

            .proj {
                border: 1px solid var(--border);
                background: var(--soft);
                border-radius: 18px;
                padding: 18px;
                text-decoration: none;
                color: inherit;
                position: relative;
                overflow: hidden;
                transition: transform 140ms ease, background 140ms ease;
            }
            .proj:hover {
                transform: translateY(-4px);
                background: rgba(127,127,127,0.10);
            }

            .proj::before {
                content: "";
                position: absolute;
                inset: -1px;
                background: radial-gradient(420px 220px at top left, rgba(79,127,255,0.16), transparent 60%);
                opacity: 1;
                pointer-events: none;
            }
            html[data-theme="dark"] .proj::before {
                background: radial-gradient(420px 220px at top left, rgba(79,127,255,0.18), transparent 60%);
            }

            .proj h3 {
                margin: 0;
                font-size: 14px;
                font-weight: 700;
                position: relative;
            }
            .proj p {
                margin: 10px 0 0;
                font-size: 13px;
                line-height: 1.7;
                color: rgba(0,0,0,0.72);
                position: relative;
            }
            html[data-theme="dark"] .proj p {
                color: rgba(255,255,255,0.7);
            }
            .proj .link {
                margin-top: 14px;
                display: inline-block;
                font-size: 13px;
                color: var(--accent);
                position: relative;
            }

            .stackCard {
                border: 1px solid var(--border);
                background: var(--soft);
                border-radius: 18px;
                padding: 18px;
            }
            .stackCardTop {
                display: flex;
                align-items: center;
                justify-content: space-between;
                gap: 12px;
            }
            .stackCardTop .count {
                font-size: 12px;
                color: var(--sub);
            }
            .stackCardTop .name {
                font-size: 14px;
                font-weight: 800;
                margin: 0;
            }
            .stackPills {
                display: flex;
                flex-wrap: wrap;
                gap: 8px;
                margin-top: 12px;
            }

            .contactBox {
                border: 1px solid var(--border);
                background: var(--soft);
                border-radius: 18px;
                padding: 18px;
                display: flex;
                align-items: center;
                justify-content: space-between;
                gap: 12px;
                flex-wrap: wrap;
            }
            .email {
                font-weight: 800;
                color: var(--accent);
                text-decoration: none;
            }
            .foot {
                border-top: 1px solid var(--border);
                padding-top: 16px;
                color: rgba(0,0,0,0.55);
                font-size: 12px;
            }
            html[data-theme="dark"] .foot {
                color: rgba(255,255,255,0.45);
            }

            /* Accessibility: reduce motion */
            @media (prefers-reduced-motion: reduce) {
                .blob,
                .shimmer {
                    animation: none !important;
                }
                .btn:hover,
                .proj:hover,
                .tabBtn:hover {
                    transform: none !important;
                }
            }
        </style>
    </head>

    <body>
        <main class="page" id="page">
            <div class="grid"></div>
            <div class="noise"></div>

            <!-- Spotlight layers -->
            <div class="spot1" id="spot1"></div>
            <div class="spot2" id="spot2"></div>

            <div class="blob" aria-hidden="true"></div>

            <div class="container">
                <!-- Header -->
                <header class="card">
                    <div class="line" aria-hidden="true"></div>
                    <div class="shimmer" aria-hidden="true"></div>

                    <div class="headerTop">
                        <div>
                            <div class="badge">
                                <span class="dot" aria-hidden="true"></span>
                                <span>Personal Branding</span>
                            </div>

                            <h1>
                                <span class="titleGradient">ë°•ì§„ì² </span></h1>
                            <p class="subline">ì»´í“¨í„°ê³µí•™ê³¼ ì¡¸ì—… Â· í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œì ì§€ë§</p>
                        </div>

                        <div class="actions">
                            <button class="btn" id="themeBtn" type="button" aria-label="ë‹¤í¬/ë¼ì´íŠ¸ ëª¨ë“œ ì „í™˜">
                                ğŸŒ™
                                <span style="font-weight: 700;">Dark</span>
                            </button>
                            <a class="btn btnPrimary" href="mailto:parkjincheol.dev@example.com">Contact â†—</a>
                        </div>
                    </div>

                    <div class="intro">
                        <div class="introGlow" aria-hidden="true"></div>
                        <p>
                            ì‚¬ìš©ì ê²½í—˜ì„ ì¤‘ì‹¬ìœ¼ë¡œ ë¬¸ì œë¥¼ ì •ì˜í•˜ê³ , ì•ˆì •ì ì´ê³  ì½ê¸° ì‰¬ìš´ UI ì½”ë“œë¥¼ ì‘ì„±í•˜ëŠ” í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œìë‹¤.<br/>
                            ë‹¨ìˆœíˆ ë™ì‘í•˜ëŠ” í™”ë©´ì´ ì•„ë‹ˆë¼, ìœ ì§€ë³´ìˆ˜ì™€ í™•ì¥ì´ ì‰¬ìš´ êµ¬ì¡°ë¥¼ ë§Œë“œëŠ” ë° ì§‘ì¤‘í•œë‹¤.
                        </p>
                    </div>

                    <div class="pillRow">
                        <span class="pill">ê°€ë…ì„±</span>
                        <span class="pill">ìƒíƒœ ì„¤ê³„</span>
                        <span class="pill">ì ‘ê·¼ì„±</span>
                        <span class="pill">ì¼ê´€ëœ UX</span>
                    </div>

                    <div class="stats">
                        <div class="stat">
                            <div class="k">Focus</div>
                            <div class="v">UI êµ¬ì¡° / ìœ ì§€ë³´ìˆ˜</div>
                        </div>
                        <div class="stat">
                            <div class="k">Style</div>
                            <div class="v">Black tone + 1 accent</div>
                        </div>
                        <div class="stat">
                            <div class="k">Availability</div>
                            <div class="v">Open to interview</div>
                        </div>
                    </div>
                </header>

                <!-- Highlights (Tabs) -->
                <section>
                    <div class="sectionHead" style="margin-bottom: 12px;">
                        <div style="display:flex; align-items:flex-end; gap:16px;">
                            <h2>Highlights</h2>
                            <span class="accentBar" aria-hidden="true"></span>
                        </div>
                        <div class="tabs" role="tablist" aria-label="Highlights íƒ­">
                            <button
                                class="tabBtn active"
                                id="tabProjects"
                                type="button"
                                role="tab"
                                aria-selected="true">
                                Projects
                            </button>
                            <button
                                class="tabBtn"
                                id="tabStack"
                                type="button"
                                role="tab"
                                aria-selected="false">
                                Tech Stack
                            </button>
                        </div>
                    </div>

                    <!-- Projects -->
                    <div class="grid3" id="panelProjects" role="tabpanel" aria-label="Projects">
                        <a class="proj" href="#" target="_blank" rel="noreferrer">
                            <h3>Campus Life Manager</h3>
                            <p>ëŒ€í•™ìƒì„ ìœ„í•œ ì¼ì •Â·ê³¼ì œÂ·ê³µì§€ í†µí•© ê´€ë¦¬ ì›¹ ì„œë¹„ìŠ¤. ë³µì¡í•œ í•™ì‚¬ ì •ë³´ë¥¼ í•œ í™”ë©´ì—ì„œ ì´í•´í•  ìˆ˜ ìˆë„ë¡ ì •ë³´ êµ¬ì¡°ë¥¼ ë‹¨ìˆœí™”í–ˆë‹¤.</p>
                            <div class="pillRow" style="margin-top:12px;">
                                <span class="pill">React</span><span class="pill">TypeScript</span><span class="pill">REST API</span>
                            </div>
                            <span class="link">View project â†’</span>
                        </a>

                        <a class="proj" href="#" target="_blank" rel="noreferrer">
                            <h3>Smart Transit Finder</h3>
                            <p>ì‹¤ì‹œê°„ ëŒ€ì¤‘êµí†µ ë°ì´í„°ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ìµœì  ê²½ë¡œë¥¼ ì¶”ì²œí•˜ëŠ” ì„œë¹„ìŠ¤. ìƒíƒœ ë³€í™”ì— ê°•í•œ UI êµ¬ì¡°ë¥¼ ì¤‘ì‹¬ìœ¼ë¡œ ì„¤ê³„í–ˆë‹¤.</p>
                            <div class="pillRow" style="margin-top:12px;">
                                <span class="pill">React</span><span class="pill">Open API</span>
                            </div>
                            <span class="link">View project â†’</span>
                        </a>

                        <a class="proj" href="#" target="_blank" rel="noreferrer">
                            <h3>Dev Note Platform</h3>
                            <p>ê°œë°œ í•™ìŠµ ê³¼ì •ì„ ê¸°ë¡í•˜ê³  ì •ë¦¬í•˜ê¸° ìœ„í•œ ê°œì¸ ê¸°ìˆ  ë¸”ë¡œê·¸ í”Œë«í¼. ë§ˆí¬ë‹¤ìš´ ê¸°ë°˜ ì—ë””í„°ë¥¼ êµ¬í˜„í–ˆë‹¤.</p>
                            <div class="pillRow" style="margin-top:12px;">
                                <span class="pill">React</span><span class="pill">Markdown</span>
                            </div>
                            <span class="link">View project â†’</span>
                        </a>
                    </div>

                    <!-- Stack -->
                    <div
                        class="grid2"
                        id="panelStack"
                        role="tabpanel"
                        aria-label="Tech Stack"
                        style="display:none;">
                        <div class="stackCard">
                            <div class="stackCardTop">
                                <p class="name">Frontend</p>
                                <span class="count">5 items</span>
                            </div>
                            <div class="stackPills">
                                <span class="pill">React</span><span class="pill">JavaScript</span><span class="pill">TypeScript</span><span class="pill">HTML</span><span class="pill">CSS</span>
                            </div>
                        </div>

                        <div class="stackCard">
                            <div class="stackCardTop">
                                <p class="name">Tools</p>
                                <span class="count">3 items</span>
                            </div>
                            <div class="stackPills">
                                <span class="pill">Git</span><span class="pill">GitHub</span><span class="pill">Figma</span>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Contact -->
                <section>
                    <div class="sectionHead" style="margin-bottom: 12px;">
                        <div style="display:flex; align-items:flex-end; gap:16px;">
                            <h2>Contact</h2>
                            <span class="accentBar" aria-hidden="true"></span>
                        </div>
                    </div>

                    <div class="contactBox">
                        <a class="email" href="mailto:parkjincheol.dev@example.com">parkjincheol.dev@example.com</a>
                        <div style="font-size:12px; color: var(--sub);">
                            Accent:
                            <span style="color: var(--accent); font-weight: 800;">#4F7FFF</span>
                        </div>
                    </div>
                </section>

                <footer class="foot">Â©
                    <span id="year"></span>
                    ë°•ì§„ì²  Â· Built with HTML/CSS/JS</footer>
            </div>
        </main>

        <script>
            // ---------- Helpers ----------
            const $ = (id) => document.getElementById(id);

            // ---------- Theme ----------
            const THEME_KEY = 'pjc_theme';
            function getSystemTheme() {
                return window.matchMedia && window
                    .matchMedia('(prefers-color-scheme: dark)')
                    .matches
                        ? 'dark'
                        : 'light';
            }
            function getInitialTheme() {
                const saved = localStorage.getItem(THEME_KEY);
                if (saved === 'dark' || saved === 'light') 
                    return saved;
                return getSystemTheme();
            }
            function setTheme(theme) {
                document.documentElement.dataset.theme = theme;
                localStorage.setItem(THEME_KEY, theme);
                const btn = $('themeBtn');
                if (btn) 
                    btn.innerHTML = theme === 'dark'
                        ? 'ğŸŒ™ <span style="font-weight: 700;">Dark</span>'
                        : 'â˜€ï¸ <span style="font-weight: 700;">Light</span>';
                }
            
            // ---------- Spotlight ----------
            const page = $('page');
            const spot1 = $('spot1');
            const spot2 = $('spot2');

            function setSpotOpacity(active) {
                spot1.style.opacity = active
                    ? getComputedStyle(document.documentElement)
                        .getPropertyValue('--spot1Opacity')
                        .trim()
                    : 0;
                spot2.style.opacity = active
                    ? getComputedStyle(document.documentElement)
                        .getPropertyValue('--spot2Opacity')
                        .trim()
                    : 0;
            }

            function updateSpot(e) {
                const rect = page.getBoundingClientRect();
                const x = e.clientX - rect.left;
                const y = e.clientY - rect.top;

                const accent = getComputedStyle(document.documentElement)
                    .getPropertyValue(
                        '--accent'
                    )
                    .trim();
                const alpha1 = getComputedStyle(document.documentElement)
                    .getPropertyValue(
                        '--spot1Alpha'
                    )
                    .trim();
                const alpha2 = getComputedStyle(document.documentElement)
                    .getPropertyValue(
                        '--spot2Alpha'
                    )
                    .trim();

                spot1.style.background = `radial-gradient(800px 520px at ${x}px ${y}px, ${hexToRgba(
                    accent,
                    parseFloat(alpha1)
                )}, transparent 62%)`;
                spot2.style.background = `radial-gradient(1200px 800px at ${x}px ${y}px, ${hexToRgba(
                    accent,
                    parseFloat(alpha2)
                )}, transparent 70%)`;

                setSpotOpacity(true);
            }

            // hex -> rgba (supports #RGB, #RRGGBB)
            function hexToRgba(hex, a) {
                let h = hex
                    .replace('#', '')
                    .trim();
                if (h.length === 3) 
                    h = h
                        .split('')
                        .map(c => c + c)
                        .join('');
                if (!/^[0-9a-fA-F]{6}$/.test(h)) 
                    return `rgba(255,255,255,${a})`;
                const r = parseInt(h.slice(0, 2), 16);
                const g = parseInt(h.slice(2, 4), 16);
                const b = parseInt(h.slice(4, 6), 16);
                const alpha = Math.max(0, Math.min(1, a));
                return `rgba(${r},${g},${b},${alpha})`;
            }

            // ---------- Tabs ----------
            function setTab(tab) {
                const isProjects = tab === 'projects';
                $('panelProjects').style.display = isProjects
                    ? ''
                    : 'none';
                $('panelStack').style.display = isProjects
                    ? 'none'
                    : '';

                $('tabProjects')
                    .classList
                    .toggle('active', isProjects);
                $('tabStack')
                    .classList
                    .toggle('active', !isProjects);

                $('tabProjects').setAttribute(
                    'aria-selected',
                    isProjects
                        ? 'true'
                        : 'false'
                );
                $('tabStack').setAttribute(
                    'aria-selected',
                    !isProjects
                        ? 'true'
                        : 'false'
                );
            }

            // ---------- Sanity tests ----------
            function runSanityTests() {
                // Test 1: required nodes exist
                const required = [
                    'page',
                    'spot1',
                    'spot2',
                    'themeBtn',
                    'tabProjects',
                    'tabStack',
                    'panelProjects',
                    'panelStack'
                ];
                for (const id of required) {
                    if (!$(id)) 
                        throw new Error('SanityTest: missing element #' + id);
                    }
                
                // Test 2: theme attribute should be applied
                const t = document.documentElement.dataset.theme;
                if (t !== 'dark' && t !== 'light') 
                    throw new Error('SanityTest: theme dataset invalid: ' + t);
                
                // Test 3: tabs switching basic
                setTab('projects');
                if ($('panelProjects').style.display === 'none') 
                    throw new Error('SanityTest: projects panel should be visible');
                setTab('stack');
                if ($('panelStack').style.display === 'none') 
                    throw new Error('SanityTest: stack panel should be visible');
                }
            
            // ---------- Init ----------
            (function init() {
                $('year').textContent = new Date().getFullYear();

                // init theme
                setTheme(getInitialTheme());

                // theme toggle
                $('themeBtn').addEventListener('click', () => {
                    const cur = document.documentElement.dataset.theme;
                    setTheme(
                        cur === 'dark'
                            ? 'light'
                            : 'dark'
                    );
                });

                // tabs
                $('tabProjects').addEventListener('click', () => setTab('projects'));
                $('tabStack').addEventListener('click', () => setTab('stack'));
                setTab('projects');

                // spotlight events
                page.addEventListener('mousemove', updateSpot);
                page.addEventListener('mouseleave', () => setSpotOpacity(false));

                // run tests (always safe in a single HTML file)
                runSanityTests();
            })();
        </script>
    </body>
</html>